(this["webpackJsonpprodeus-frontend"]=this["webpackJsonpprodeus-frontend"]||[]).push([[4],{487:function(e,t,a){"use strict";function n(e,t,a,n,c,r,i){try{var l=e[r](i),s=l.value}catch(o){return void a(o)}l.done?t(s):Promise.resolve(s).then(n,c)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(c,r){var i=e.apply(t,a);function l(e){n(i,c,r,l,s,"next",e)}function s(e){n(i,c,r,l,s,"throw",e)}l(void 0)}))}}a.d(t,"a",(function(){return c}))},505:function(e,t,a){e.exports=a.p+"static/media/class-img.68eeb6bd.png"},506:function(e,t,a){e.exports=a.p+"static/media/plus.fd2afe7c.svg"},576:function(e,t,a){},599:function(e,t,a){"use strict";a.r(t);var n=a(17),c=a.n(n),r=a(487),i=a(5),l=a(0),s=a.n(l),o=a(10),u=a(23),d=a(206),p=a.n(d),m=a(34),f=a.n(m),g=a(134),h=a(67),v=a(131),b=a(208),y=a(177),E=a(132),_=a(505),w=a.n(_),N=a(506),j=a.n(N),x=a(22),C=a(18),I=a(12);a(576);t.default=function(){var e=Object(u.g)(),t=Object(I.c)(),a=Object(l.useState)(!1),n=Object(i.a)(a,2),d=n[0],m=n[1],_=Object(o.c)((function(e){return e.auth.userToken})),N=Object(g.a)({initialValues:{url:"",title:"",description:"",category:"",topics:[],difficulty:"",youtubeId:"",duration:"",instructor:"",instructorImage:""},validationSchema:h.a({url:h.c().required("Required").matches(/^(https?\:\/\/)?(www\.youtube\.com|youtu\.?be)\/.+$/,"Must be a youtube link"),topics:h.c().required("Select at least one topic"),category:h.c().required("Required"),difficulty:h.c().required("Required")}),onSubmit:function(e){var t=e.title,a=e.description,n=e.category,c=e.topics,r=e.difficulty,i=e.youtubeId,l=e.duration,s=e.instructor,o=e.instructorImage;L({title:t,description:a,duration:l,category:n,difficulty:r,language:"English",youtubeID:i,topics:c,instructor:s,instructorImage:o})}}),O=N.values,k=N.handleSubmit,S=N.handleChange,q=N.touched,T=N.errors,D=N.handleBlur,A=N.setFieldValue,F=Object(l.useCallback)((function(e){var t=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);return!(!t||11!=t[1].length)&&t[1]}),[]),R=Object(l.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F(t),e.next=3,B(a);case 3:n=e.sent,A("youtubeId",a,!1),A("duration",n.duration,!1),A("title",n.title,!1),A("description",n.description,!1),A("instructor",n.instructor,!1),A("instructorImage",n.instructorImage,!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[F,A]);function B(e){return J.apply(this,arguments)}function J(){return(J=Object(r.a)(c.a.mark((function e(t){var a,n,r,i,l,s,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(x.b,"?id=").concat(t,"&key=").concat("AIzaSyDSwa0FK5o8l0t9ugouFJq_QxBPem_jvTg","&part=contentDetails,snippet"));case 2:if(a=e.sent,(n=a.data).items.length){e.next=7;break}return console.log("\n\n\n\n\n\n undefined data \n\n\n\n\n\n"),e.abrupt("return","remove");case 7:return r=n.items[0].snippet,i=n.items[0].contentDetails.duration,l=p.a.duration(i).hours(),s=p.a.duration(i).minutes(),o=p.a.duration(i).seconds(),u=l>0?"".concat(l,"hrs ").concat(s,"m"):"".concat(s,"m ").concat(o,"s"),e.abrupt("return",{id:t,title:r.title,description:r.description,image:"https://i.ytimg.com/vi/".concat(t,"/hqdefault.jpg"),duration:u,instructor:r.channelTitle,instructorImage:r.thumbnails.default.url});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(t){m(!0),f.a.post("".concat(x.a,"/class/add"),t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(_)}}).then((function(t){m(!1),console.log(t);var a=t.data;e.push({pathname:"/library-class",state:{details:a}})})).catch((function(e){m(!1),console.log(e)}))};Object(l.useEffect)((function(){O.url&&!0!==T.url&&/^(https?\:\/\/)?(www\.youtube\.com|youtu\.?be)\/.+$/.test(O.url)&&R("".concat(O.url))}),[O.url,T.url,R]);return Object(l.useEffect)((function(){}),[]),s.a.createElement("div",{id:"add-class-page"},s.a.createElement("div",{className:"add-class-page"},s.a.createElement("div",{className:"add-class-page__left-column"},s.a.createElement("h1",{className:"add-class-page__left-column__header"},"Add Class"),s.a.createElement("form",{noValidate:!0,onSubmit:k},s.a.createElement("div",{className:"input-wrapper"},s.a.createElement("div",{className:"add-class-page__input-component"},s.a.createElement("label",{className:"add-class-page__input-component__label"},"URL"),s.a.createElement("div",{className:"add-class-page__input-component__input"},s.a.createElement("input",{type:"text",placeholder:"Youtube URL",name:"url",id:"url",value:O.url,onChange:S,onBlur:D})),q.url&&T.url?s.a.createElement("div",{className:"input-error-message"},T.url):null)),s.a.createElement("div",{className:"input-wrapper"},s.a.createElement("div",{className:"add-class-page__input-component"},s.a.createElement("label",{className:"add-class-page__input-component__label"},"TITLE"),s.a.createElement("div",{className:"add-class-page__input-component__input"},s.a.createElement("input",{type:"text",placeholder:"Class Title",name:"title",id:"title",value:O.title})))),s.a.createElement("div",{className:"textarea-wrapper"},s.a.createElement("div",{className:"add-class-page__textarea-component"},s.a.createElement("label",{htmlFor:""},"Description"),s.a.createElement("textarea",{name:"",id:"",cols:"",rows:"",placeholder:"Write a description",value:O.description}))),s.a.createElement("div",{className:"dropdown-wrapper"},s.a.createElement("h6",null,"Category"),s.a.createElement(b.a,{placeholder:"Select Category",value:O.category,options:t,handleChange:function(e){return A("category",e)},name:"category"}),q.category&&T.category?s.a.createElement("div",{className:"input-error-message"},T.category):null),s.a.createElement("div",{className:"dropdown-wrapper"},s.a.createElement("h6",null,"Topics"),s.a.createElement(y.a,{value:O.topics,options:C.e,handleChange:function(e){return A("topics",e)},name:"topics",placeholder:"Add Topics..."}),q.topics&&T.topics?s.a.createElement("div",{className:"input-error-message"},T.topics):null),s.a.createElement("div",{className:"dropdown-wrapper"},s.a.createElement("h6",null,"Difficulty"),s.a.createElement(b.a,{placeholder:"Select Difficulty",value:O.difficulty,options:C.d,handleChange:function(e){return A("difficulty",e)},name:"difficulty"}),q.difficulty&&T.difficulty?s.a.createElement("div",{className:"input-error-message"},T.difficulty):null),s.a.createElement(v.a,{type:"submit",disabled:d},d?s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,null),"Adding Class..."):s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"icon-wrapper"},s.a.createElement("img",{src:j.a,alt:"+"})),s.a.createElement("span",{className:"text"},"Add Class"))))),s.a.createElement("div",{className:"add-class-page__right-column",style:{backgroundImage:"url(".concat(w.a,")")}})))}}}]);
//# sourceMappingURL=AddClassPage.fe92f958.chunk.js.map